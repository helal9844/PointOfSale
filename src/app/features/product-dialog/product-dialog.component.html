<h2 mat-dialog-title>{{ data.isEdit ? 'Edit Product' : 'Add Product' }}</h2>
<form [formGroup]="productForm">
  <mat-form-field *ngIf="data.isEdit">
    <mat-label>Name</mat-label>
    <input matInput formControlName="name">
  </mat-form-field>
  <mat-form-field *ngIf="!data.isEdit">
    <mat-label>Name</mat-label>
    <input type="text" matInput formControlName="name" [matAutocomplete]="autoProduct">
    <mat-autocomplete #autoProduct="matAutocomplete"(optionSelected)="selectProduct($event.option.value)">
      <mat-option *ngFor="let product of filteredProducts | async" [value]="product.name">
        {{ product.name }}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>
  <mat-form-field>
    <mat-label>Price</mat-label>
    <input matInput type="number" formControlName="price">
  </mat-form-field>
  <mat-form-field>
    <mat-label>Stock</mat-label>
    <input matInput type="number" formControlName="stock">
  </mat-form-field>
  <mat-form-field *ngIf="!data.isEdit">
    <mat-label>Category</mat-label>
    <input type="text" matInput [formControl]="categorySearchControl" [matAutocomplete]="categoryAuto">
    <mat-autocomplete #categoryAuto="matAutocomplete" (optionSelected)="selectCategory($event.option.value)">
      <mat-option *ngFor="let category of filteredCategories | async" [value]="category.name">
        {{ category.name }}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>
  <div mat-dialog-actions>
    <button mat-button (click)="dialogRef.close()">Cancel</button>
    <button mat-button color="primary" (click)="saveProduct()">Save</button>
  </div>
</form>
