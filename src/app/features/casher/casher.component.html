<div class="container cashier-panel">
    <h2 class="text-center mt-4">
        <i class="fas fa-cash-register"></i> Cashier Panel
    </h2>

    <!-- Session & User Info -->
    <div class="session-info d-flex justify-content-between align-items-center mt-4 p-3">
        <span><strong>User:</strong> {{ loggedInUser.cashierUser }}</span>
        <span>
            <strong>Status:</strong>
            <span [class.text-success]="sessionActive" [class.text-danger]="!sessionActive">
                {{ sessionActive ? 'Active' : 'Inactive' }}
            </span>
        </span>
        <span><strong>Session Total:</strong> ${{ sessionTotal }}</span>
    </div>

    <!-- Session Controls -->
    <div class="d-flex justify-content-center gap-3 my-3">
        <button class="btn btn-lg btn-primary" (click)="startSession()" [disabled]="sessionActive">
            <i class="fas fa-play"></i> Start Session
        </button>
        <button class="btn btn-lg btn-danger" (click)="closeSession()" [disabled]="!sessionActive">
            <i class="fas fa-stop"></i> Close Session
        </button>
    </div>

    <hr>

    <!-- Main Layout Grid -->
    <div class="row" [hidden]="!sessionActive">
        <!-- Left Side: Product Selection -->
        <div class="col-lg-8">
            <div class="category-section">
                <h3>Select a Category</h3>
                <div class="d-flex flex-wrap gap-2">
                    <button *ngFor="let category of categories" class="btn btn-outline-secondary"
                        [class.active]="selectedCategory === category.id"
                        (click)="selectCategory(category.id)">
                        {{ category.name }}
                    </button>
                </div>

                <!-- Search Bar -->
                <div class="mt-3">
                    <input type="text" class="form-control" placeholder="Search products..."
                        [(ngModel)]="searchTerm">
                </div>

                <hr>

                <h3 *ngIf="selectedCategory">Products</h3>
                <div class="row">
                    <div class="col-md-4 mb-3" *ngFor="let product of filteredProducts()">
                        <div class="card product-card">
                            <div class="card-body text-center">
                                <h5 class="card-title">{{ product.name }}</h5>
                                <p class="card-text price">${{ product.price }}</p>
                                <button class="btn btn-success btn-sm" (click)="addToOrder(product)">
                                    <i class="fas fa-cart-plus"></i> Add to Order
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Side: Order Summary -->
        <div class="col-lg-4">
            <div class="card p-3 order-summary">
                <h4>Subtotal: <span class="float-end">${{ subtotal }}</span></h4>
                <h5>Discount: <span class="float-end text-danger">- ${{ discount }}</span></h5>
                <h5>Tax (14%): <span class="float-end">${{ tax }}</span></h5>
                <hr>
                <h3>Total: <span class="float-end text-primary">${{ totalAmount }}</span></h3>
            </div>

            <button class="btn btn-success w-100 mt-3" (click)="placeOrder()" [disabled]="!sessionActive || totalAmount === 0">
                <i class="fas fa-check"></i> Place Order
            </button>

            <h3 class="mt-4">Order Summary</h3>
            <table class="table table-striped">
                <thead class="table-dark">
                    <tr>
                        <th>Product</th>
                        <th>Qty</th>
                        <th>Total</th>
                        <th>Remove</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of order">
                        <td>{{ item.name }}</td>
                        <td>
                            <input type="number" class="form-control" [(ngModel)]="item.quantity" (change)="updateTotal()" min="1">
                        </td>
                        <td>${{ item.price * item.quantity }}</td>
                        <td>
                            <button class="btn btn-sm btn-danger" (click)="removeFromOrder(item)">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div> <!-- End Right Side -->
    </div> <!-- End Row -->
</div>
